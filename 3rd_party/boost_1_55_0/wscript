import os.path
import glob

def configure( conf ):
	pass

def build( bld ):
	import Options
	
	#---------------------
	# libs
	#---------------------
	bld(
		name = 'boost',
		includes = './',
		export_incdirs = './',
		uselib = 'ZLIB'
	)

	bld(
		features = 'cxx cstaticlib',
		target = 'boost-iostreams',
		source = bld.glob( 'libs/iostreams/src/*.cpp' ),
		includes='./',
		uselib = 'ZLIB BZIP2',
		export_incdirs = './'
	)

	bld(
		features = 'cxx cstaticlib',
		target = 'boost-system',
		source = bld.glob( 'libs/system/src/*.cpp' ),
		includes='./',
		export_incdirs = './'
	)

	bld(
		features = 'cxx cstaticlib',
		target = 'boost-regex',
		source = bld.glob( 'libs/regex/src/*.cpp' ),
		includes='./',
		export_incdirs = './'
	)

	bld(
		features = 'cxx cstaticlib',
		target = 'boost-unit_test_framework',
		source = [
			'libs/test/src/compiler_log_formatter.cpp',
			'libs/test/src/debug.cpp',
			'libs/test/src/exception_safety.cpp',
			'libs/test/src/execution_monitor.cpp',
			'libs/test/src/framework.cpp',
			'libs/test/src/interaction_based.cpp',
			'libs/test/src/logged_expectations.cpp',
			'libs/test/src/plain_report_formatter.cpp',
			'libs/test/src/progress_monitor.cpp',
			'libs/test/src/results_collector.cpp',
			'libs/test/src/results_reporter.cpp',
			'libs/test/src/test_main.cpp',
			'libs/test/src/test_tools.cpp',
			'libs/test/src/unit_test_log.cpp',
			'libs/test/src/unit_test_main.cpp',
			'libs/test/src/unit_test_monitor.cpp',
			'libs/test/src/unit_test_parameters.cpp',
			'libs/test/src/unit_test_suite.cpp',
			'libs/test/src/xml_log_formatter.cpp',
			'libs/test/src/xml_report_formatter.cpp'
		],
		includes='./',
		export_incdirs = './'
	)

	bld(
		features = 'cxx cstaticlib',
		target = 'boost-thread',
		source = bld.glob( 'libs/thread/src/*.cpp' ) + bld.glob( 'libs/thread/src/pthread/*.cpp' ),
		uselib = 'PTHREAD',
		includes='./',
		export_incdirs = './'
	)

	bld(
		features = 'cxx cstaticlib',
		target = 'boost-date-time',
		source = bld.glob( 'libs/date_time/src/posix_time/*.cpp' ) + bld.glob( 'libs/thread/src/pthread/*.cpp' ),
		includes='./',
		export_incdirs = './'
	)
